<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible'>
    <title>Math practice:Catagoty 1 and 4 EOC</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>
<body>
    <label for='degree'>Degree(linear equations are in the 1st degree,quadratics the second):</label><input type='number' id='degree'>
    <h1><span>Enter a degree</span><div></div><button>Submit</button><button>Skip</button></h1>
    <p id='streak'>Streak:<span>0</span></p>
    <script>
        $ = function(selector){var x = document.querySelectorAll(selector);if(x.length == 1){return x[0]}else{return x;}}
        alert('This website will generate random equations. First,you will have to enter in the degree of the equations you want.If you find the solution(s), type the solution(s) in the input box(es), and then click submit. If you do not find the solution, just skip the problem.')
        $('#degree').onchange = function(){
            $('span')[0].innerHTML = ''
            $('div').innerHTML = ''
            for(var r = 0;r < Number($('#degree').value);r++){
                $('div').innerHTML += "<input type='number'/>"
            }
        }
        var abc = []
        var streak = 0;
        setInterval(()=>{
            if($('span')[0].innerHTML == ''){
                abc = []
                for(var i = 0;i <= Number($('#degree').value);i++){
                    if(i == 0){
                        abc.push(Math.round(Math.random()*15)-5)    
                    }else{
                    abc.push(Math.round(Math.random()*20)-10)
                }
            }
                for(var c in abc){
                    if(c == abc.length - 2){
                        $('span')[0].innerHTML += abc[c] + 'x + '
                    }else if(c == abc.length - 1){
                        $('span')[0].innerHTML += abc[c]
                    }else{
                        $('span')[0].innerHTML += abc[c] + 'x<sup>' + (abc.length - 1 - c) + '</sup> + '
                    }       
                }
                $('span')[0].innerHTML += '= 0'
            }
        },10)

        $('button')[0].onclick = function(){
            if(Number($('#degree').value) >= 1){
                var correct = 0    
                for(var a of $('div').children){
                    var ans = 0
                    for(var b in abc){
                        if(b == abc.length-1 && abc[abc.length-1] == 0){
                            ans += 0
                        }else{
                        ans += Math.pow(Number(a.value),abc.length-1-b)*abc[b]
                    }}
                    console.log(ans)
                    if(Math.round(ans*100) == 0){
                        correct += 1
                    }
                }
                if(correct == Number($('#degree').value)){
                    alert('Correct!')
                    streak += 1;
                    $('span')[1].innerHTML = streak
                    $('span')[0].innerHTML = ''
                    $('div').innerHTML = ''
                    for(var m = 0;m < Number($('#degree').value);m++){
                        $('div').innerHTML += "<input type='number'/>"
                    }
                }else{
                    alert('Wrong answer')
                    streak = 0;
                    $('span')[1].innerHTML = streak
                }
        }else{
            $('#degree').value = '1'
            $('span')[0].innerHTML = ''
            $('div').innerHTML = ''
            for(var g = 0;g < Number($('#degree').value);g++){
                $('div').innerHTML += "<input type='number'/>"
            }
        }
    }
        $('button')[1].onclick = function(){
            if(Number($('#degree').value) >= 1){
            $('span')[0].innerHTML = ''
            }else{
                $('#degree').value = '1'
                $('span')[0].innerHTML = ''
            }
                $('div').innerHTML = ''
                for(var g = 0;g < Number($('#degree').value);g++){
                    $('div').innerHTML += "<input type='number'/>"
                }
        }
    </script>
</body>
</html>